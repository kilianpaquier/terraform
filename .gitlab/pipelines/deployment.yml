# Code generated by kickr; DO NOT EDIT.

---
include:

  # Terraform template
  # https://gitlab.com/to-be-continuous/terraform
  - project: to-be-continuous/terraform
    ref: 1f8b9a41510bf08326d1fac403281f0137711c5d # 8.1.3
    file: templates/gitlab-ci-terraform.yml

variables:
  TF_IMAGE: ghcr.io/opentofu/opentofu:1.11.2
  TF_TFLINT_IMAGE: ghcr.io/terraform-linters/tflint:v0.60.0
  TF_TFLINT_ARGS: --config "$CI_PROJECT_DIR/.tflint.hcl" --recursive

  TF_CHECKOV_ENABLED: "false"
  TF_DOCS_ENABLED: "false"
  TF_FMT_ENABLED: "true"
  TF_PUBLISH_ENABLED: "false"
  TF_TRIVY_DISABLED: "true"
  TF_VALIDATE_ENABLED: "true"

  TF_REVIEW_ENABLED: "false"
  TF_INTEG_ENABLED: "false"
  TF_STAGING_ENABLED: "false"
  TF_PROD_ENABLED: "true"

.tf-workspace:
  variables:
    TF_BASE_ADDRESS: ${CI_API_V4_URL}/projects/${CI_PROJECT_ID}/terraform/state
  parallel:
    matrix:
      - TF_PROJECT_DIR: modules/git
        # see https://gitlab.com/to-be-continuous/terraform/-/blob/master/templates/gitlab-ci-terraform.yml?ref_type=heads#L774
        TF_ADDRESS: ${TF_BASE_ADDRESS}/ff76aae2.${CI_ENVIRONMENT_SLUG}
      - TF_PROJECT_DIR: modules/cloud
        # see https://gitlab.com/to-be-continuous/terraform/-/blob/master/templates/gitlab-ci-terraform.yml?ref_type=heads#L774
        TF_ADDRESS: ${TF_BASE_ADDRESS}/771c5852.${CI_ENVIRONMENT_SLUG}
