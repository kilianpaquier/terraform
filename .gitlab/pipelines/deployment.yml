# Code generated by kickr; DO NOT EDIT.

---
include:

  # Terraform template
  # https://gitlab.com/to-be-continuous/terraform
  - project: to-be-continuous/terraform
    ref: a8edc659533b6ba8e5e8eed2486ac77c77e9e229 # 8.1.0
    file: templates/gitlab-ci-terraform.yml

variables:

  TF_IMAGE: ghcr.io/opentofu/opentofu:latest
  TF_TFLINT_ARGS: --config "$CI_PROJECT_DIR/.tflint.hcl" --recursive
  TF_TRIVY_DISABLED: "true"

  TF_REVIEW_ENABLED: "false"
  TF_INTEG_ENABLED: "false"
  TF_STAGING_ENABLED: "false"
  TF_PROD_ENABLED: "true"

.tf-base:
  variables:
    TF_BASE_ADDRESS: ${CI_API_V4_URL}/projects/${CI_PROJECT_ID}/terraform/state
  parallel:
    matrix:
      - TF_PROJECT_DIR: modules/hetzner
        # see https://gitlab.com/to-be-continuous/terraform/-/blob/master/templates/gitlab-ci-terraform.yml?ref_type=heads#L774
        TF_ADDRESS: ${TF_BASE_ADDRESS}/3a0a796d.${CI_ENVIRONMENT_SLUG}
      - TF_PROJECT_DIR: modules/git
        # see https://gitlab.com/to-be-continuous/terraform/-/blob/master/templates/gitlab-ci-terraform.yml?ref_type=heads#L774
        TF_ADDRESS: ${TF_BASE_ADDRESS}/ff76aae2.${CI_ENVIRONMENT_SLUG}
